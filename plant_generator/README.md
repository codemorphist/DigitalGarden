# Пакет plant_generator

Цей пакет є ядром проєкту, адже саме він реалізує магію генерації рослин.
Він складається з наступних модулів: 
- **genom**: Реалізує робуту з геномами агентів та рослин
- **agent**: Реалізує роботу агентів
- **plant**: Реалізує роботу рослини
- **smash**: Реалізує алгоритми схрещування рослин

___

# Алгоритм генерації

Під час створення цього проєкту ми надихалися цим відео: [Digital Garden. Description of the algorithm](https://www.youtube.com/watch?v=xw1AZLiNjB8&ab_channel=SimulifeHub)

Сам алгоритм є дуже простим, у нас є кілька поколінь агентів, кожен агент малює кола,
ці кола можуть бути різного кольору та радіусу, з кожним намальованим ходом він змінює ці параметри
в залежності від прописаного його геному. Після того як агент відмалював всі кола (параметр length в його геномі) 
він створює нащадків і помирає. Так продовжується до поки вся рослина не буде намальована.

___

# Модулі

**Навігація:**
- [genom](#genom)
- [agent](#agent)
- [plant](#plant)
- [smash](#smash)

## genom

### AgentGenom

Представляє собою `@dataclass` що зберігає інформацію про геном агента
```python
    length: int # довжина агента
    length_deviation: int # 

    size: int # початковий радіус кіл 
    size_from_ancestor: int # радіус від предка
    size_from_level: int # радіус від покоління
    size_changes: int # зміна радіусу на кожному кроці

    red: int # червоний канал кольору
    green: int # зелений канал кольору
    blue: int # синій канал кольору
    red_changes: int # зміна червоного каналу кольору
    green_changes: int # зміна зеленого каналу кольору
    blue_changes: int # зміна синього каналу кольору
    color_from_ancestor: int # колір від предка к відсотках
    color_deviation: int # мутація кольору

    number_branches: int # кількість нащадків
    angle_branches: int # кут між нащадками
    angle_deviation: int # мутація кута між нащадками

    turn: int # кут напрямку
    random_turn: int # випадковий кут 
    down: int # наскільки сильно тягне агента вниз
```

**Опис методів:**
- `empty()`: повертає пустий геном агента
- `random()`: повертає випадково згенерований геном агента

### PlantGenom

Збрегігає массив з геномами агентів а також реалізує метод `evolve()` для генерації геному нащадка 
в залежності від геному предка.

**Опис методів:**
- `evolve()`: приймає геном предка і видає геном нащадка відповідно до таблиці з геномом
- `export_genom()`: перетворює геном в рядки у вигляді таблиці
- `import_genom()`: імпортує геном з рядка
- `table()`: повертає геном у вигляді таблиці (масиву масивів)
- `empty()`: провертає пустий геном рослини
- `random()`: повертає випадково згенерований геном рослини

## agent

**Релізує роботу агента:**
- Генерацію кіл
- Генерацію нащадків

**Опис методів:**
- `get_circle()`: повертає коло згенероване агентом
- `is_live()`: повертає статус агента
- `get_heirs()`: повертає нащадків агента

## plant

**Реалізує роботу рослини:**
- Отримання кіл згенерованих агентами
- Оновлення агантів

**Опис методів:**
- `get_circles()`: повертає об'єкт генератора, що повертає кола на кожній ітерації
- `is_growing()`: повертає статус рослини
- `init_agents()`: ініціалізує першого агента
- `random()`: повертає випадково згенеровану рослину

## smash

**Реалізує два основних алгоритма схрещування рослин:**
- Ймоіврносний (`SmashType.Probalistic`)
- Середньго зваженого (`SmashType.WeightedAverage`)

### Probability

Імовірнісний метод схрещування двох геномів рослин

**Алгоритм:**
 1. Перебираємо кожен ген у таблиці
 2. Ми випадковим чином генеруємо число від 0 до 100
 3. Якщо більше, ніж ймовірність, ми беремо ген для нащадка з Genome2, інакше з Genome1
 4. Наприкінці випадковим чином вибираємо клітинку з генома Нащадка і запишіть у нього випадково згенероване число
 5. Повторюємо `4` стільки разів, скільки є мутацій

### WeightedAverage

Метод [середньозваженого](https://en.wikipedia.org/wiki/Weighted_arithmetic_mean) схрещування рослин

**Алгоритм:**
 1. Перебираємо кожен ген у таблиці
 2. Для нащадка ставимо ген, значення якого розраховується наступним чином: `Weight * Genome1 + (1 - weight) * Genome2`

### Mass Smash 

Це додатковий метод що дозволяє послідовно схрестити деякий набір рослин за допомогою конкретного способу.



